{"version":3,"sources":["scripts/main.js"],"names":["body","document","querySelector","table","headers","querySelectorAll","tBodies","selectedRow","activeCell","directions","Array","from","map","header","forEach","addEventListener","index","cellIndex","rowsArray","rows","direction","multiplier","sort","a","b","numOrSrting","str","hasDigits","test","replace","cellA","textContent","cellB","row","appendChild","e","tr","target","closest","contains","classList","remove","add","insertAdjacentHTML","pushNotification","title","description","type","message","createElement","innerHTML","append","setTimeout","notifications","wrong","wrongName","wrongPosition","wrongAge","wrongSalary","success","form","formInputs","nameInput","position","age","salary","salaryReg","nameReg","positionReg","editCell","cell","setAttribute","input","value","trim","getAttribute","removeAttribute","removeEventListener","saveChanges","inputChange","preventDefault","cols","nameVal","positionVal","ageVal","parseInt","salaryVal","i","length","tdCell","getElementsByName","toString","reset","td"],"mappings":"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","file":"main.4d3f6388.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst body = document.querySelector('body');\nconst table = document.querySelector('table');\nconst headers = table.querySelectorAll('th');\nconst tBodies = table.querySelector('tbody');\n\nlet selectedRow = null;\nlet activeCell = null;\n\nconst directions = Array.from(headers).map((header) => '');\n\nheaders.forEach(header => {\n  header.addEventListener('click', () => {\n    const index = header.cellIndex;\n    const rows = table.tBodies[0].querySelectorAll('tr');\n    const rowsArray = [...rows];\n    const direction = directions[index] || 'asc';\n\n    const multiplier = (direction === 'asc') ? 1 : -1;\n\n    rowsArray.sort((a, b) => {\n      function numOrSrting(str) {\n        const hasDigits = /\\d/.test(str);\n\n        return hasDigits ? +str.replace(/\\D/g, '') : str;\n      };\n\n      const cellA = numOrSrting(a.querySelectorAll('td')[index].textContent);\n      const cellB = numOrSrting(b.querySelectorAll('td')[index].textContent);\n\n      if (cellA > cellB) {\n        return 1 * multiplier;\n      } else if (cellA < cellB) {\n        return -1 * multiplier;\n      } else {\n        return 0;\n      }\n    });\n\n    directions[index] = direction === 'asc' ? 'desc' : 'asc';\n\n    rowsArray.forEach(row => {\n      table.tBodies[0].appendChild(row);\n    });\n  });\n});\n\ntBodies.addEventListener('click', (e) => {\n  const tr = e.target.closest('tr');\n\n  if (!tr) {\n    return;\n  };\n\n  if (!table.contains(tr)) {\n    return;\n  };\n\n  if (selectedRow) {\n    selectedRow.classList.remove('active');\n  }\n  selectedRow = tr;\n  tr.classList.add('active');\n});\n\ntable.insertAdjacentHTML('afterend', `\n<form class=\"new-employee-form\">\n  <label>\n    Name:\n    <input\n      name=\"name\"\n      type=\"text\"\n      data-qa=\"name\"\n      placeholder=\"Joe Black\"\n    >\n  </label>\n\n  <label>\n    Position:\n    <input\n      name=\"position\"\n      type=\"text\"\n      data-qa=\"position\"\n      placeholder=\"Employee position\"\n    >\n  </label>\n\n  <label>\n    Office:\n    <select\n      name=\"office\"\n      type=\"select\"\n      data-qa=\"office\"\n    >\n      <option value=\"Tokyo\">\n        Tokyo\n      </option>\n      <option value=\"Singapore\">\n        Singapore\n      </option>\n      <option value=\"London\">\n        London\n      </option>\n      <option value=\"New York\">\n        New York\n      </option>\n      <option value=\"Edinburgh\">Edinburgh</option>\n      <option value=\"San Francisco\">\n        San Francisco\n      </option>\n    </select>\n  </label>\n\n  <label>\n    Age:\n    <input\n      name=\"age\"\n      type=\"number\"\n      data-qa=\"age\" placeholder=\"Employee age\"\n    >\n  </label>\n\n  <label>\n    Salary:\n    <input\n      name=\"salary\"\n      type=\"number\"\n      data-qa=\"salary\"\n      placeholder=\"Employee salary\"\n    >\n  </label>\n\n  <button\n    type=\"submit\"\n    class=\"validate__btn\"\n    value=\"Submit\"\n  >\n    Save to table\n  </button>\n</form>`);\n\nconst pushNotification = ({ title, description, type }) => {\n  const message = document.createElement('div');\n\n  message.innerHTML = `\n  <div class=\"notification ${type}\" data-qa=\"notification\">\n    <h2 class = \"title\">${title}</h2>\n    <p>${description}</p>\n  </div>\n  `;\n\n  body.append(message);\n  setTimeout(() => message.remove(), 2000);\n};\n\nconst notifications = {\n  wrong: {\n    title: 'WRONG!',\n    description: 'All form fields must be completed',\n    type: 'error',\n  },\n  wrongName: {\n    title: 'WRONG NAME!',\n    description: 'The name must contain 4 to 30 letters!',\n    type: 'error',\n  },\n  wrongPosition: {\n    title: 'WRONG POSITION NAME!',\n    description: 'The position name should have more than 2 letters!',\n    type: 'error',\n  },\n  wrongAge: {\n    title: 'WRONG AGE!',\n    description: 'The employee must be over 18 and under 90!',\n    type: 'error',\n  },\n  wrongSalary: {\n    title: 'WRONG SALARY!',\n    description: 'The salary should be a positive number!',\n    type: 'error',\n  },\n  success: {\n    title: 'SUCCESS!',\n    description: 'A new employee was added to the table!',\n    type: 'success',\n  },\n};\n\nconst form = document.querySelector('.new-employee-form');\nconst formInputs = form.querySelectorAll('input');\nconst nameInput = form.querySelector('[data-qa=\"name\"]');\nconst position = form.querySelectorAll('[data-qa=\"position\"]');\nconst age = form.querySelector('[data-qa=\"age\"]');\nconst salary = form.querySelector('[data-qa=\"salary\"]');\nconst salaryReg = /^\\d{1,}$/;\nconst nameReg = /^([a-z]+( [a-z]+)?){4,30}$/i;\nconst positionReg = /^([a-z]+( [a-z]+)?){2,50}$/i;\n\nform.addEventListener('submit', (e) => {\n  e.preventDefault();\n\n  const tr = document.createElement('tr');\n  const cols = ['name', 'position', 'office', 'age', 'salary'];\n  const nameVal = nameInput.value;\n  const positionVal = position.value;\n  const ageVal = parseInt(age.value);\n  const salaryVal = salary.value;\n\n  for (let i = 0; i < formInputs.length; i++) {\n    if (!formInputs[i].value) {\n      pushNotification(notifications.wrong);\n\n      return;\n    }\n  }\n\n  if (!nameReg.test(nameVal)) {\n    pushNotification(notifications.wrongName);\n\n    return;\n  }\n\n  if (!positionReg.test(positionVal)) {\n    pushNotification(notifications.wrongPosition);\n  }\n\n  if (ageVal < 18 || ageVal >= 90) {\n    pushNotification(notifications.wrongAge);\n\n    return;\n  }\n\n  if (!salaryReg.test(salaryVal)) {\n    pushNotification(notifications.wrongSalary);\n\n    return;\n  }\n\n  for (let i = 0; i < cols.length; ++i) {\n    const tdCell = document.createElement('td');\n\n    tdCell.textContent = document.getElementsByName(cols[i])[0].value;\n\n    if (cols[i] === 'salary') {\n      tdCell.textContent = `$`\n        + document.getElementsByName(cols[i])[0].value\n          .toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n    }\n    tr.appendChild(tdCell);\n  }\n\n  document.querySelector('table tbody').appendChild(tr);\n\n  pushNotification(notifications.success);\n\n  document.querySelector('form').reset();\n});\n\ntable.addEventListener('dblclick', (e) => {\n  const td = e.target.closest('td');\n\n  if (!td) {\n    return;\n  };\n\n  if (!table.contains(td)) {\n    return;\n  };\n\n  editCell(td);\n});\n\nfunction editCell(cell) {\n  if (activeCell) {\n    return;\n  }\n\n  activeCell = cell;\n  activeCell.setAttribute('data-original-value', activeCell.innerHTML);\n\n  const input = document.createElement('input');\n\n  input.classList.add('cell-input');\n  input.value = activeCell.innerHTML;\n  activeCell.innerHTML = '';\n  activeCell.appendChild(input);\n\n  input.addEventListener('blur', function() {\n    const value = input.value.trim();\n\n    if (!value) {\n      activeCell.innerHTML = activeCell.getAttribute('data-original-value');\n    } else {\n      activeCell.innerHTML = value;\n    }\n    activeCell.removeAttribute('data-original-value');\n    input.removeEventListener('blur', saveChanges);\n    activeCell = null;\n  });\n\n  function saveChanges(inputChange) {\n    const value = inputChange.value.trim();\n\n    if (!value) {\n      activeCell.innerHTML = activeCell.getAttribute('data-original-value');\n    } else {\n      activeCell.innerHTML = value;\n    }\n    activeCell.removeAttribute('data-original-value');\n    inputChange.removeEventListener('blur', saveChanges);\n    activeCell = null;\n  }\n}\n"]}